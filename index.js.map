{"version":3,"file":"index.js","sources":["../src/js/quiz.js"],"sourcesContent":["import axios from 'axios';\nimport intlTelInput from 'intl-tel-input';\nimport 'intl-tel-input/build/css/intlTelInput.css';\nimport 'intl-tel-input/build/js/utils.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet phoneInput;\nconst serverURL = 'http://localhost:3000/responses';\n\nconst questions = [\n  { question: 'Question 1', options: ['option 1', 'option 2', 'option 3'] },\n  { question: 'Question 2', options: ['option 1', 'option 2', 'option 3'] },\n  { question: 'Question 3', options: ['option 1', 'option 2', 'option 3'] },\n  { question: 'Question 4', options: ['option 1', 'option 2', 'option 3'] },\n  { question: 'Question 5', options: ['option 1', 'option 2', 'option 3'] },\n];\n\nlet currentQuestion = 0;\nlet answers = [];\n\nfunction showQuestion() {\n  const quiz = document.getElementById('quiz');\n  quiz.innerHTML = `\n    <h2>${questions[currentQuestion].question}</h2>\n    <ul>\n      ${questions[currentQuestion].options\n        .map(\n          (option, index) => `\n            <li>\n              <input type=\"radio\" name=\"answer\" value=\"${option}\" id=\"option${index}\">\n              <label for=\"option${index}\">${option}</label>\n            </li>\n          `\n        )\n        .join('')}\n    </ul>\n  `;\n}\n\ndocument.getElementById('next').addEventListener('click', () => {\n  const selectedOption = document.querySelector('input[name=\"answer\"]:checked');\n  if (selectedOption) {\n    answers.push(selectedOption.value);\n    currentQuestion++;\n    if (currentQuestion < questions.length) {\n      showQuestion();\n    } else {\n      document.getElementById('quiz-container').style.display = 'none';\n      document.getElementById('registration-container').style.display = 'block';\n    }\n  } else {\n    iziToast.error({\n      position: 'topRight',\n      theme: 'dark',\n      messageColor: 'white',\n      backgroundColor: '#ef4040',\n      message: 'Please, choose an option',\n    });\n  }\n});\n\nconst form = document.querySelector('.wt-form');\nconst formEmail = document.querySelector('.wt-email-input');\nconst phoneInputField = document.querySelector('.wt-phone-input');\nconst successMessage = document.querySelector('.wt-success-message');\nconst errorMessage = document.querySelector('.wt-error-message');\n\nconst emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\nformEmail.addEventListener('input', function () {\n  const email = formEmail.value.trim();\n  if (emailPattern.test(email)) {\n    formEmail.classList.add('success');\n    formEmail.classList.remove('error');\n    successMessage.style.display = 'block';\n    errorMessage.style.display = 'none';\n  } else {\n    formEmail.classList.add('error');\n    formEmail.classList.remove('success');\n    successMessage.style.display = 'none';\n    errorMessage.style.display = 'block';\n  }\n});\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  console.log('phoneInputField:', phoneInputField);\n  if (phoneInputField) {\n    console.log('intlTelInput:', intlTelInput);\n    try {\n      phoneInput = intlTelInput(phoneInputField, {\n        initialCountry: 'ua',\n        utilsScript: 'intl-tel-input/build/js/utils.js',\n      });\n\n      console.log('phoneInput:', phoneInput);\n\n      if (phoneInput && phoneInput.getNumber) {\n        console.log(`intl-tel-input ініціалізовано: ${phoneInput}`);\n        console.log('intl-tel-input initialized');\n      } else {\n        console.error('intl-tel-input не ініціалізовано!');\n      }\n    } catch (error) {\n      console.error('Помилка при ініціалізації intlTelInput:', error);\n    }\n\n    phoneInputField.addEventListener('blur', function () {\n      setTimeout(() => {\n        if (\n          phoneInput &&\n          typeof phoneInput.getNumber === 'function' &&\n          intlTelInput.numberFormat\n        ) {\n          try {\n            const nationalFormat = phoneInput.getNumber(\n              intlTelInput.numberFormat.NATIONAL\n            );\n            const internationalFormat = phoneInput.getNumber(\n              intlTelInput.numberFormat.INTERNATIONAL\n            );\n            console.log(`Національний формат: ${nationalFormat}`);\n            console.log(`Міжнародний формат: ${internationalFormat}`);\n          } catch (error) {\n            console.error('Помилка при отриманні форматів:', error);\n          }\n        } else {\n          console.error(\n            'intl-tel-input не ініціалізовано, метод getNumber не доступний або intlTelInput.numberFormat не визначено.'\n          );\n        }\n      }, 0);\n    });\n  } else {\n    console.error('Елемент #phone не знайдено.');\n  }\n});\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  document.querySelector('button[type=\"submit\"]').disabled = true;\n  document.querySelector('button[type=\"submit\"]').textContent = 'Sending...';\n\n  if (!phoneInput || !phoneInput.getNumber()) {\n    iziToast.error({\n      position: 'topRight',\n      theme: 'dark',\n      messageColor: 'white',\n      backgroundColor: '#ef4040',\n      message: 'Please, write a correct phone number!',\n    });\n    document.querySelector('button[type=\"submit\"]').disabled = false;\n    document.querySelector('button[type=\"submit\"]').textContent = 'Send';\n    return;\n  }\n\n  const phoneNumber = phoneInput.getNumber();\n  const isValid = phoneInput.isValidNumber();\n\n  if (!isValid) {\n    iziToast.error({\n      position: 'topRight',\n      theme: 'dark',\n      messageColor: 'white',\n      backgroundColor: '#ef4040',\n      message: 'Please, write a correct phone number',\n    });\n    document.querySelector('button[type=\"submit\"]').disabled = false;\n    document.querySelector('button[type=\"submit\"]').textContent = 'Відправити';\n    return;\n  }\n\n  const formData = {\n    name: document.getElementById('name').value,\n    email: formEmail.value.trim(),\n    phone: phoneNumber,\n    answers: answers,\n  };\n\n  console.log('Формдані:', formData);\n\n  try {\n    const response = await axios.post(serverURL, formData, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n    if (response.status === 201) {\n      iziToast.success({\n        position: 'topRight',\n        theme: 'dark',\n        messageColor: 'white',\n        backgroundColor: '#4CAF50',\n        message: 'Дані успішно відправлено.',\n      });\n      document.getElementById('registration-container').innerHTML =\n        '<p>Thank you! Your data has been successfully sent.</p>';\n      form.reset();\n    } else {\n      throw new Error('Unexpected response status: ' + response.status);\n    }\n  } catch (error) {\n    console.error('Помилка відправки даних:', error);\n    iziToast.error({\n      position: 'topRight',\n      theme: 'dark',\n      messageColor: 'white',\n      backgroundColor: '#ef4040',\n      message:\n        'Error: ' +\n        (error.response?.data?.message ||\n          'Something went wrong. Please, try again!'),\n    });\n  } finally {\n    document.querySelector('button[type=\"submit\"]').disabled = false;\n    document.querySelector('button[type=\"submit\"]').textContent = 'Send';\n  }\n});\n\nshowQuestion();\n"],"names":["phoneInput","serverURL","questions","currentQuestion","answers","showQuestion","quiz","option","index","selectedOption","iziToast","form","formEmail","phoneInputField","successMessage","errorMessage","emailPattern","email","intlTelInput","error","nationalFormat","internationalFormat","event","phoneNumber","formData","response","axios","_b","_a"],"mappings":"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"}